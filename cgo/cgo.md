#### go调用c代码(cgo)

```
package main

/*
int sum(int a, int b){
	return a+b;
}
*/
import "C"

func main() {
	println(C.sum(1, 1))
}
——————————————————————————————
go tool cgo main.go
原理
1.在内存中开辟一个结构体
2.结构体中含有参数和返回值
3.结构体地址传入C方法
4.C方法将结构写入返回值的位置

调度器的配合
1.协程需要抢占式调度
2.进入C程序之后，调度器无法抢占协程
3.调度器停止对此协程的调度

协程栈的切换
1.C的栈不受Runtime管理
2.进入C时，需要将当前栈切换到线程的系统栈上

cgo的优缺点
1.cgo可以让go调用现成的C实现
2.cgo限制了go语言的跨平台特性
3.cgo并不能提高Go语言的性能

总结
1.cgo是让go语言调用C方法的技术
2.cgo需要go调度器和协程栈的配合
3.cgo一般用于找不到go实现的情况
4.cgo不能提高性能，是一个临时解决方案
```

